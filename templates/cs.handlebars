{{#if copyright.claimant}}
/*
All the code that follow is
Copyright (c) {{copyright.year}}, {{copyright.claimant}}. All Rights Reserved.
Not for reuse without permission.
*/

{{/if}}
using OpenQA.Selenium;
using OpenQA.Selenium.Support.PageObjects;
using OpenQA.Selenium.Support.UI;
using System;
using System.Collections.Generic;

{{#if model.namespace}}namespace {{model.namespace}}
{
{{/if}}
{{#if model.namespace}}    {{/if}}public class {{model.name}}
{{#if model.namespace}}    {{/if}}{
{{#if model.namespace}}    {{/if}}    private Dictionary<string, string> data;
{{#if model.namespace}}    {{/if}}    private IWebDriver driver;
{{#if model.namespace}}    {{/if}}    private int timeout = {{timeout}};

        {{#attributes}}
        {{#if attribute.strategy}}
{{#if model.namespace}}    {{/if}}    [FindsBy(How = How.{{proper attribute.strategy}}{{#equals attribute.strategy 'css'}}Selector{{/equals}}, Using = "{{attribute.value}}")]
{{#if model.namespace}}    {{/if}}    [CacheLookup]
{{#if model.namespace}}    {{/if}}    private {{#equals type 'radio'}}IList<IWebElement>{{else}}IWebElement{{/equals}} {{attribute.name}};
        {{else}}
{{#if model.namespace}}    {{/if}}    private readonly string {{attribute.name}} = "{{attribute.value}}";
        {{/if}}
        {{/attributes}}

{{#if model.namespace}}    {{/if}}    public {{model.name}}()
{{#if model.namespace}}    {{/if}}        : this(default(IWebDriver), new Dictionary<string, string>(), {{timeout}})
{{#if model.namespace}}    {{/if}}    {
{{#if model.namespace}}    {{/if}}    }

{{#if model.namespace}}    {{/if}}    public {{model.name}}(IWebDriver driver)
{{#if model.namespace}}    {{/if}}        : this(driver, new Dictionary<string, string>(), {{timeout}})
{{#if model.namespace}}    {{/if}}    {
{{#if model.namespace}}    {{/if}}    }

{{#if model.namespace}}    {{/if}}    public {{model.name}}(IWebDriver driver, Dictionary<string, string> data)
{{#if model.namespace}}    {{/if}}        : this(driver, data, {{timeout}})
{{#if model.namespace}}    {{/if}}    {
{{#if model.namespace}}    {{/if}}    }

{{#if model.namespace}}    {{/if}}    public {{model.name}}(IWebDriver driver, Dictionary<string, string> data, int timeout)
{{#if model.namespace}}    {{/if}}    {
{{#if model.namespace}}    {{/if}}        this.driver = driver;
{{#if model.namespace}}    {{/if}}        this.data = data;
{{#if model.namespace}}    {{/if}}        this.timeout = timeout;
{{#if model.namespace}}    {{/if}}    }

        {{#operations}}
{{#if model.namespace}}    {{/if}}    /**
{{#if model.namespace}}    {{/if}}     * {{#if argument}}{{argument.documentation}}{{else}}{{operation.documentation}}{{/if}}
{{#if model.namespace}}    {{/if}}     */
{{#if model.namespace}}    {{/if}}    public {{default target.modelName @root.model.name}} {{operation.name}}() 
{{#if model.namespace}}    {{/if}}    {
        {{#if argument}}
{{#if model.namespace}}    {{/if}}        return {{operation.name}}(data["{{argument.key}}"]);
{{#if model.namespace}}    {{/if}}    }

{{#if model.namespace}}    {{/if}}    /**
{{#if model.namespace}}    {{/if}}     * {{operation.documentation}}
{{#if model.namespace}}    {{/if}}     */
{{#if model.namespace}}    {{/if}}    public {{default target.modelName @root.model.name}} {{operation.name}}(string {{argument.name}})
{{#if model.namespace}}    {{/if}}    {
        {{/if}}
        {{#equals type 'button'}}
{{#if model.namespace}}    {{/if}}        {{attribute.name}}.Click();
        {{/equals}}
        {{#equals type 'checkbox'}}
{{#if model.namespace}}    {{/if}}        if ({{#unless negate}}!{{/unless}}{{attribute.name}}.Selected) {
{{#if model.namespace}}    {{/if}}            {{attribute.name}}.Click();
{{#if model.namespace}}    {{/if}}        }
        {{/equals}}
        {{#equals type 'fill'}}
        {{#fill}}
{{#if model.namespace}}    {{/if}}        {{operation.name}}();
        {{/fill}}
        {{/equals}}
        {{#equals type 'fill.submit'}}
{{#if model.namespace}}    {{/if}}        Fill();
{{#if model.namespace}}    {{/if}}        return Submit();
        {{/equals}}
        {{#equals type 'link'}}
{{#if model.namespace}}    {{/if}}        {{attribute.name}}.Click();
        {{/equals}}
        {{#equals type 'radio'}}
{{#if model.namespace}}    {{/if}}        foreach (IWebElement el in {{attribute.name}}) {
{{#if model.namespace}}    {{/if}}            if (el.GetAttribute("value").Equals({{argument.name}})) {
{{#if model.namespace}}    {{/if}}                if (!el.Selected) {
{{#if model.namespace}}    {{/if}}                    el.Click();
{{#if model.namespace}}    {{/if}}                }
{{#if model.namespace}}    {{/if}}                break;
{{#if model.namespace}}    {{/if}}            }
{{#if model.namespace}}    {{/if}}        }
        {{/equals}}
        {{#equals type 'select'}}
{{#if model.namespace}}    {{/if}}        new SelectElement({{attribute.name}}).{{#if negate}}Des{{else}}S{{/if}}electByText({{argument.name}});
        {{/equals}}
        {{#equals type 'submit'}}
{{#if model.namespace}}    {{/if}}        {{target.name}}();
            {{#if target.modelName}}
{{#if model.namespace}}    {{/if}}        {{target.modelName}} target = new {{target.modelName}}(driver, data, timeout);
{{#if model.namespace}}    {{/if}}        PageFactory.InitElements(driver, target);
            {{/if}}
        {{/equals}}
        {{#equals type 'text'}}
{{#if model.namespace}}    {{/if}}        {{attribute.name}}.SendKeys({{argument.name}});
        {{/equals}}
        {{#equals type 'verify.loaded'}}
{{#if model.namespace}}    {{/if}}        new WebDriverWait(driver, TimeSpan.FromSeconds(timeout)).Until<bool>((d) =>
{{#if model.namespace}}    {{/if}}        {
{{#if model.namespace}}    {{/if}}            return d.PageSource.Contains({{attribute.name}});
{{#if model.namespace}}    {{/if}}        });
        {{/equals}}
        {{#equals type 'verify.url'}}
{{#if model.namespace}}    {{/if}}        new WebDriverWait(driver, TimeSpan.FromSeconds(timeout)).Until<bool>((d) =>
{{#if model.namespace}}    {{/if}}        {
{{#if model.namespace}}    {{/if}}            return d.Url.Contains({{attribute.name}});
{{#if model.namespace}}    {{/if}}        });
        {{/equals}}
        {{#unequals type 'fill.submit'}}
{{#if model.namespace}}    {{/if}}        return {{#if target.modelName}}target{{else}}this{{/if}};
        {{/unequals}}
{{#if model.namespace}}    {{/if}}    }
        {{/operations}}
{{#if model.namespace}}    {{/if~}} }
{{#if model.namespace}}
}
{{/if}}
